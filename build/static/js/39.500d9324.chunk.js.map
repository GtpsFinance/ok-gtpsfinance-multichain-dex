{"version":3,"sources":["components/LiveChart/ProChartToggle.tsx","assets/svg/fullscreen_off.svg","assets/svg/fullscreen_on.svg","assets/svg/loading_logo.svg","components/Loader/AnimatedLoader.tsx","components/TradingViewChart/datafeed.tsx","components/TradingViewChart/index.tsx","components/LiveChart/AnimatingNumber.tsx","components/LiveChart/CircleInfoIcon.tsx","components/LiveChart/index.tsx"],"names":["ToggleButton","styled","span","theme","tabActive","element","offsetLeft","offsetWidth","size","ToggleElement","border","isActive","disabled","text","buttonGray","subText","ToggleWrapper","button","background","ProChartToggle","id","activeName","buttons","name","title","toggle","buttonsRef","useRef","useTheme","useState","activeElement","setActiveElement","useEffect","current","tabBackgound","some","b","map","ref","el","onClick","_g","_excluded","_extends","Object","assign","bind","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgFullscreenOff","_ref","svgRef","titleId","props","xmlns","viewBox","width","height","fill","d","ForwardRef","SvgFullscreenOn","loadingAnimation","keyframes","Wrapper","div","Inner","primary","AnimateLoader","src","LoadingLogo","alt","configurationData","supported_resolutions","NetworkString","ChainId","MAINNET","BSCMAINNET","MATIC","CRONOS","AVAXMAINNET","FANTOM","ARBITRUM","VELAS","AURORA","OASIS","OPTIMISM","ETHW","SOLANA","BTTC","ROPSTEN","RINKEBY","GÖRLI","KOVAN","BSCTESTNET","MUMBAI","AVAXTESTNET","CRONOSTESTNET","ARBITRUM_TESTNET","DextoolSearchV2ChainId","DEXTOOLS_API","monthTs","weekTs","dayTs","TOKEN_PAIRS_ADDRESS_MAPPING","epjfwdd5aufqssqem2qn1xzybapc8g4weggkzwytdt1v","LOCALSTORAGE_CHECKED_PAIRS","fetcherDextools","url","fetch","then","res","json","catch","error","console","warn","searchTokenPair","address","chainId","toLowerCase","Promise","resolve","reject","pair","results","filter","token","volume","sort","tokenA","tokenB","getHistoryCandleStatus","pairAddress","getCandlesApi","apiVersion","ts","sym","isNativeToken","currency","isNative","WETH","isUSDToken","usdTokenAddresses","USDT","USDC","DAI","STABLE_COINS_ADDRESS","a","includes","updateLocalstorageCheckedPair","cPstr","localStorage","getItem","checkedPairs","JSON","parse","time","Date","getTime","setItem","stringify","checkPairHasDextoolsData","currencies","values","currencyA","currencyB","ver","symbolA","symbol","symbolB","join","checkedPair","searchResults","Math","floor","data","candles","useDatafeed","useActiveWeb3React","isATokenEther","isBTokenEther","isTokenUSD","isToken","isEtherUSD","setData","oldestTs","setOldestTs","stateRef","fetchingRef","intervalRef","isReverse","clearInterval","getCandles","useCallback","response","useMemo","onReady","callback","setTimeout","resolveSymbol","symbolName","onSymbolResolvedCallback","onResolveErrorCallback","label1","label2","label","symbolInfo","ticker","full_name","listed_exchange","format","description","type","session","timezone","Intl","DateTimeFormat","resolvedOptions","timeZone","exchange","minmov","pricescale","pow","ceil","log10","open","has_intraday","has_empty_bars","has_weekly_and_monthly","has_daily","data_status","log","getBars","resolution","periodParams","onHistoryCallback","onErrorCallback","from","to","candlesTemp","noData","minTime","lastTimePoint","firstDataRequest","fromTimePoint","promisesArray","push","all","datas","parseFloat","reduce","p","c","concat","formatedCandles","arr","close","high","low","max","min","dayCandles","timeTs","forEach","searchSymbols","subscribeBars","onTick","listenerGuid","onResetCacheNeededCallback","getLivePrice","lastCandle","closestTs","prev","curr","abs","inRangeCandles","setInterval","unsubscribeBars","ProLiveChartWrapper","isMobile","fullscreen","Z_INDEXS","LIVE_CHART","Loader","MobileChart","buttonBlack","$loading","LOCALSTORAGE_STATE_NAME","ProLiveChart","stateProChart","className","setLoading","userLocale","useUserLocale","hasProChart","loading","setRef","setFullscreen","datafeed","window","TradingView","localStorageState","charts","panes","rightAxisesState","state","m_isAutoScale","widgetOptions","interval","container","library_path","locale","slice","disabled_features","enabled_features","autosize","studies_overrides","darkMode","custom_css_url","timeframe","time_frames","auto_save_delay","saved_data","tvWidget","widget","onChartReady","applyOverrides","red","headerReady","fullscreenOn","createButton","setAttribute","addEventListener","fs","elem","doc","document","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","closeFullscreen","requestFullscreen","webkitRequestFullScreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","innerHTML","ReactDOMServer","subscribe","save","object","remove","AnimatedLoader","newRef","e","stopPropagation","style","display","React","memo","DecimalColumn","TicketView","fontSize","NumberPlaceHolder","Container","TickerDigit","TickerColumn","animated","NumberColumn","digit","position","setPosition","columnContainer","number","clientHeight","setColumnToNumber","styles","useSpring","transform","num","AnimatingNumber","value","toString","split","baseValue","eValue","numArray","reverse","toPrecision","formatForDisplay","Infinity","fontWeight","index","parseInt","alignItems","color","paddingBottom","paddingTop","alignSelf","CircleInfoIcon","fillRule","clipRule","stroke","strokeWidth","strokeLinecap","strokeLinejoin","LiveChartWrapper","TimeFrameButton","active","textReverse","SwitchButtonWrapper","ProLiveChartCustom","$isShowProChart","getTimeFrameText","timeFrame","LiveDataTimeframeEnum","HOUR","FOUR_HOURS","DAY","WEEK","MONTH","SIX_MONTHS","LiveChart","onRotateClick","isSolana","prevCurrencies","usePrevious","currenciesState","setCurrenciesState","nativeInputCurrency","useCurrencyConvertedToNative","Field","INPUT","undefined","nativeOutputCurrency","OUTPUT","tokens","wrapped","isWrappedToken","isUnwrapingWSOL","hoverValue","setHoverValue","setTimeFrame","setStateProChart","useBasicChartData","chartData","basicChartError","basicChartLoading","isProchartError","isBasicchartError","bothChartError","showProChartStore","useShowProLiveChart","toggleProLiveChart","useToggleProLiveChart","mixpanelHandler","useMixpanel","handleSetLoading","currenciesChanged","showingValue","firstValue","lastValue","differentValue","compareValue","chartColor","different","differentPercent","toFixed","getDifferentValues","isShowProChart","setIsShowProChart","timeout","clearTimeout","renderTimeframes","marginTop","item","MIXPANEL_TYPE","PRO_CHART_CLICKED","BASIC_CHART_CLICKED","currenciesList","minHeight","flexDirection","justifyContent","gap","textAlign","paddingY","flex","currency0","currency1","margin","marginLeft","whiteSpace","disableText","marginRight","WarningIcon","LineChart"],"mappings":"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","file":"static/js/39.500d9324.chunk.js","sourcesContent":["import { useEffect, useRef, useState } from 'react'\r\nimport styled from 'styled-components'\r\n\r\nimport useTheme from 'hooks/useTheme'\r\n\r\nconst ToggleButton = styled.span<{ size?: string; element?: HTMLSpanElement }>`\r\n  position: absolute;\r\n  transition: all 0.2s ease;\r\n  background-color: ${({ theme }) => theme.tabActive};\r\n  ${({ element }) => `\r\n    transform: translateX(${element?.offsetLeft ?? 55}px);\r\n    width: ${element?.offsetWidth || 44}px;\r\n  `}\r\n  border-radius: ${({ size }) => (size === 'md' ? '16px' : '12px')};\r\n  height: 100%;\r\n\r\n  top: 0;\r\n`\r\n\r\nconst ToggleElement = styled.span<{\r\n  isActive?: boolean\r\n  size?: string\r\n  border?: boolean\r\n  disabled?: boolean\r\n}>`\r\n  font-size: ${({ size }) => (size === 'md' ? '16px' : '12px')};\r\n  font-weight: 500;\r\n  height: ${({ size, border }) => (size === 'md' ? 32 : 20) + (border ? 0 : 2) + 'px'};\r\n  padding: 6px 12px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  z-index: 1;\r\n  transition: all 0.2s ease;\r\n  color: ${({ theme, isActive, disabled }) => (isActive ? theme.text : disabled ? theme.buttonGray : theme.subText)};\r\n  cursor: ${({ disabled }) => (disabled ? 'inherit' : 'pointer')};\r\n`\r\n\r\nconst ToggleWrapper = styled.button<{ size?: string; border?: boolean; background?: string }>`\r\n  position: relative;\r\n  border-radius: ${({ size }) => (size === 'md' ? '18px' : '12px')};\r\n  border: ${({ background, border }) => (border ? `2px solid ${background}` : 'none')};\r\n  background: ${({ background }) => background};\r\n  display: flex;\r\n  width: fit-content;\r\n  outline: none;\r\n  padding: 0;\r\n`\r\n\r\ninterface IToggleButton {\r\n  name: string\r\n  title: string\r\n  disabled?: boolean\r\n}\r\ninterface ProChartToggleProps {\r\n  id?: string\r\n  activeName?: string\r\n  buttons?: IToggleButton[]\r\n  toggle: (name: string) => void\r\n  size?: 'sm' | 'md'\r\n  border?: boolean\r\n}\r\n\r\nexport default function ProChartToggle({\r\n  id,\r\n  activeName = 'pro',\r\n  buttons = [\r\n    { name: 'basic', title: 'Basic' },\r\n    { name: 'pro', title: 'Pro' },\r\n  ],\r\n  toggle,\r\n  size = 'sm',\r\n  border = false,\r\n}: ProChartToggleProps) {\r\n  const buttonsRef = useRef<any>({})\r\n  const theme = useTheme()\r\n  const [activeElement, setActiveElement] = useState()\r\n\r\n  useEffect(() => {\r\n    setActiveElement(buttonsRef.current[activeName])\r\n  }, [activeName])\r\n\r\n  return (\r\n    <ToggleWrapper\r\n      id={id}\r\n      size={size}\r\n      border={border}\r\n      background={`${theme.tabBackgound}${buttons.some((b: any) => b.disabled) ? '20' : ''}`}\r\n    >\r\n      {buttons.map(button => {\r\n        return (\r\n          <ToggleElement\r\n            key={button.name}\r\n            ref={el => {\r\n              buttonsRef.current[button.name] = el\r\n            }}\r\n            isActive={activeName === button.name}\r\n            size={size}\r\n            border={border}\r\n            disabled={button.disabled}\r\n            onClick={() => {\r\n              !button.disabled && toggle(button.name)\r\n            }}\r\n          >\r\n            {button.title}\r\n          </ToggleElement>\r\n        )\r\n      })}\r\n      <ToggleButton element={activeElement} size={size} />\r\n    </ToggleWrapper>\r\n  )\r\n}\r\n","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFullscreenOff(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 28 28\",\n    width: 28,\n    height: 28,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"currentColor\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11 17v4h1V16h-5v1z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.854 11.854l5-5-.708-.708-5 5zM17 17v4H16V16h5v1z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.146 11.854l-5-5 .708-.708 5 5zM11 11v-4h1v5h-5v-1z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.854 16.146l5 5-.708.708-5-5z\"\n  }), /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M17 11v-4H16v5h5v-1z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.146 16.146l-5 5 .708.708 5-5z\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFullscreenOff);\nexport default __webpack_public_path__ + \"static/media/fullscreen_off.68ab5857.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFullscreenOn(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 28 28\",\n    width: 28,\n    height: 28,\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    fill: \"currentColor\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21 7v4h1V6h-5v1z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.854 11.854l5-5-.708-.708-5 5zM7 7v4H6V6h5v1z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.146 11.854l-5-5 .708-.708 5 5zM21 21v-4h1v5h-5v-1z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.854 16.146l5 5-.708.708-5-5z\"\n  }), /*#__PURE__*/React.createElement(\"g\", null, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 21v-4H6v5h5v-1z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.146 16.146l-5 5 .708.708 5-5z\"\n  })))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFullscreenOn);\nexport default __webpack_public_path__ + \"static/media/fullscreen_on.4867a3f6.svg\";\nexport { ForwardRef as ReactComponent };","export default __webpack_public_path__ + \"static/media/loading_logo.00d7ef55.svg\";","import styled, { keyframes } from 'styled-components'\r\n\r\nimport LoadingLogo from 'assets/svg/loading_logo.svg'\r\n\r\nconst loadingAnimation = keyframes`\r\n  0% { transform: rotate(0deg) }\r\n  50% { transform: rotate(180deg) }\r\n  100% { transform: rotate(360deg) }\r\n`\r\n\r\nconst Wrapper = styled.div<{ size: number }>`\r\n  width: ${({ size }) => size}px;\r\n  height: ${({ size }) => size}px;\r\n  display: inline-block;\r\n  overflow: hidden;\r\n  background: transparent;\r\n`\r\n\r\nconst Inner = styled.div<{ size: number }>`\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transform: translateZ(0) scale(1);\r\n  backface-visibility: hidden;\r\n  transform-origin: 0 0; /* see note above */\r\n  > div {\r\n    position: absolute;\r\n    animation: ${loadingAnimation} 1s linear infinite;\r\n    width: ${({ size }) => size * 0.8}px;\r\n    height: ${({ size }) => size * 0.8}px;\r\n    top: ${({ size }) => size * 0.1}px;\r\n    left: ${({ size }) => size * 0.1}px;\r\n    border-radius: 50%;\r\n    box-shadow: 0 ${({ size }) => (size >= 200 ? '3px' : '2px')} 0 0 ${({ theme }) => theme.primary};\r\n    transform-origin: ${({ size }) => `${size * 0.4}px ${size * 0.41}px`};\r\n    box-sizing: content-box;\r\n  }\r\n`\r\n\r\nfunction AnimateLoader({ size = 160 }: { size?: number }) {\r\n  return (\r\n    <Wrapper size={size}>\r\n      <Inner size={size}>\r\n        <div />\r\n        <div />\r\n        <img src={LoadingLogo} width=\"30%\" alt=\"\" />\r\n      </Inner>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default AnimateLoader\r\n","import { ChainId, Currency, Token, WETH } from '@kyberswap/ks-sdk-core'\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react'\r\n\r\nimport { DAI, STABLE_COINS_ADDRESS, USDC, USDT } from 'constants/tokens'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport { Field } from 'state/swap/actions'\r\n\r\nimport {\r\n  Bar,\r\n  ErrorCallback,\r\n  HistoryCallback,\r\n  LibrarySymbolInfo,\r\n  PeriodParams,\r\n  ResolutionString,\r\n  ResolveCallback,\r\n  SubscribeBarsCallback,\r\n  Timezone,\r\n} from './charting_library'\r\n\r\nconst configurationData = {\r\n  supported_resolutions: ['1', '3', '5', '15', '30', '1H', '2H', '4H', '1D', '1W', '1M'],\r\n}\r\n\r\nconst NetworkString: { [chain in ChainId]: string } = {\r\n  [ChainId.MAINNET]: 'chain-ethereum',\r\n  [ChainId.BSCMAINNET]: 'chain-bsc',\r\n  [ChainId.MATIC]: 'chain-polygon',\r\n  [ChainId.CRONOS]: 'chain-cronos',\r\n  [ChainId.AVAXMAINNET]: 'chain-avalanche',\r\n  [ChainId.FANTOM]: 'chain-fantom',\r\n  [ChainId.ARBITRUM]: 'chain-arbitrum',\r\n  [ChainId.VELAS]: 'chain-velas',\r\n  [ChainId.AURORA]: 'chain-aurora',\r\n  [ChainId.OASIS]: 'chain-oasis',\r\n  [ChainId.OPTIMISM]: 'chain-optimism',\r\n  [ChainId.ETHW]: 'chain-ethw',\r\n  [ChainId.SOLANA]: 'chain-solana',\r\n\r\n  [ChainId.BTTC]: '',\r\n  [ChainId.ROPSTEN]: '',\r\n  [ChainId.RINKEBY]: '',\r\n  [ChainId.GÖRLI]: '',\r\n  [ChainId.KOVAN]: '',\r\n  [ChainId.BSCTESTNET]: '',\r\n  [ChainId.MUMBAI]: '',\r\n  [ChainId.AVAXTESTNET]: '',\r\n  [ChainId.CRONOSTESTNET]: '',\r\n  [ChainId.ARBITRUM_TESTNET]: '',\r\n}\r\n\r\nconst DextoolSearchV2ChainId: { [chain in ChainId]: string } = {\r\n  [ChainId.MAINNET]: 'ether',\r\n  [ChainId.BSCMAINNET]: 'bsc',\r\n  [ChainId.MATIC]: 'polygon',\r\n  [ChainId.CRONOS]: 'cronos',\r\n  [ChainId.AVAXMAINNET]: 'avalanche',\r\n  [ChainId.FANTOM]: 'fantom',\r\n  [ChainId.ARBITRUM]: 'arbitrum',\r\n  [ChainId.VELAS]: 'velas',\r\n  [ChainId.AURORA]: 'aurora',\r\n  [ChainId.OASIS]: 'oasis',\r\n  [ChainId.OPTIMISM]: 'optimism',\r\n  [ChainId.ETHW]: 'ethw',\r\n  [ChainId.SOLANA]: 'solana',\r\n\r\n  [ChainId.BTTC]: '',\r\n  [ChainId.ROPSTEN]: '',\r\n  [ChainId.RINKEBY]: '',\r\n  [ChainId.GÖRLI]: '',\r\n  [ChainId.KOVAN]: '',\r\n  [ChainId.BSCTESTNET]: '',\r\n  [ChainId.MUMBAI]: '',\r\n  [ChainId.AVAXTESTNET]: '',\r\n  [ChainId.CRONOSTESTNET]: '',\r\n  [ChainId.ARBITRUM_TESTNET]: '',\r\n}\r\n\r\nconst DEXTOOLS_API = 'https://pancake-subgraph-proxy.kyberswap.com/dextools'\r\nconst monthTs = 2592000000\r\nconst weekTs = 604800000\r\nconst dayTs = 86400000\r\n// Hard code token address to specific pair address to use in dextool api.\r\nconst TOKEN_PAIRS_ADDRESS_MAPPING: {\r\n  [key: string]: string\r\n} = {\r\n  '0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9': '0xd75ea151a61d06868e31f8988d28dfe5e9df57b4',\r\n  '0x6b175474e89094c44da98b954eedeac495271d0f': '0x74c99f3f5331676f6aec2756e1f39b4fc029a83e',\r\n  '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48': '0x74c99f3f5331676f6aec2756e1f39b4fc029a83e',\r\n  '0x1c954e8fe737f99f68fa1ccda3e51ebdb291948c': 'nodata',\r\n  '0x8f3cf7ad23cd3cadbd9735aff958023239c6a063': '0xa374094527e1673a86de625aa59517c5de346d32',\r\n  '0x1af3f329e8be154074d8769d1ffa4ee058b1dbc3': '0xd99c7f6c65857ac913a8f880a4cb84032ab2fc5b',\r\n  '0xd586e7f844cea2f87f50152665bcbc2c279d8d70': '0xa389f9430876455c36478deea9769b7ca4e3ddb1',\r\n  '0xc7198437980c041c805a1edcba50c1ce5db95118': '0xa389f9430876455c36478deea9769b7ca4e3ddb1',\r\n  '0x19860ccb0a68fd4213ab9d8266f7bbf05a8dde98': '0xa389f9430876455c36478deea9769b7ca4e3ddb1',\r\n  '0x8d11ec38a3eb5e956b052f67da8bdc9bef8abf3e': '0xadc8ad9d3d62b1af72e5ce0ec767465f313513dd',\r\n  '0x049d68029688eabf473097a2fc38ef61633a3c7a': '0xadc8ad9d3d62b1af72e5ce0ec767465f313513dd',\r\n  '0x41e3df7f716ab5af28c1497b354d79342923196a': '0xadc8ad9d3d62b1af72e5ce0ec767465f313513dd',\r\n  '0xf2001b145b43032aaf5ee2884e456ccd805f677d': '0xa68466208f1a3eb21650320d2520ee8eba5ba623',\r\n  '0x66e428c3f67a68878562e79a0234c1f83c208770': '0xa68466208f1a3eb21650320d2520ee8eba5ba623',\r\n  '0xda10009cbd5d07dd0cecc66161fc93d7c9000da1': '0xc31e54c7a869b9fcbecc14363cf510d1c41fa443',\r\n  '0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9': '0xc31e54c7a869b9fcbecc14363cf510d1c41fa443',\r\n  '0x49d5c2bdffac6ce2bfdb6640f4f80f226bc10bab': '0x0f0fc5a5029e3d155708356b422d22cc29f8b3d4',\r\n  '0xd501281565bf7789224523144fe5d98e8b28f267': '0x64ed9711667c9e8923bee32260a55a9b8dbc99d3',\r\n  '0x63a72806098Bd3D9520cC43356dD78afe5D386D9': '0x5944f135e4f1e3fa2e5550d4b5170783868cc4fe',\r\n  '0x8ac76a51cc950d9822d68b83fe1ad97b32cd580d': '0xd99c7f6c65857ac913a8f880a4cb84032ab2fc5b',\r\n  '0xdac17f958d2ee523a2206206994597c13d831ec7': '0x4e68ccd3e89f51c3074ca5072bbac773960dfa36', // BNB_USD\r\n  '0x7ceb23fd6bc0add59e62ac25578270cff1b9f619': '0xce1923d2242bba540f1d56c8e23b1fbeae2596dc', // ETH_USD on polygon\r\n  '0xff970a61a04b1ca14834a43f5de4533ebddb5cc8': '0x905dfcd5649217c42684f23958568e533c711aa3', // ETH_USD Arbitrum\r\n  '0x7f5c764cbc14f9669b88837ca1490cca17c31607': '0x1a981daa7967c66c3356ad044979bc82e4a478b9', // ETH_USD Optimism\r\n  '0xe9e7cea3dedca5984780bafc599bd69add087d56': '0x58f876857a02d6762e0101bb5c46a8c1ed44dc16', // BNB_BUSD\r\n  '0x853ea32391aaa14c112c645fd20ba389ab25c5e0': '0x5d79a43e6b9d8e3ecca26f91afe34634248773c8', // USX on AVAX\r\n  '0x261c94f2d3cccae76f86f6c8f2c93785dd6ce022': 'nodata', // ATH on BSC\r\n  '0x94b008aA00579c1307B0EF2c499aD98a8ce58e58': '0xc858a329bf053be78d6239c4a4343b8fbd21472b', // USDT on Optimism\r\n  epjfwdd5aufqssqem2qn1xzybapc8g4weggkzwytdt1v: 'EGZ7tiLeH62TPV1gL8WwbXGzEPa9zmcpVnnkPKKnrE2U', // USDC on SOLANA\r\n}\r\nconst LOCALSTORAGE_CHECKED_PAIRS = 'proChartCheckedPairs'\r\n\r\nconst fetcherDextools = (url: string) => {\r\n  return fetch(`${DEXTOOLS_API}/${url}`)\r\n    .then(res => res.json())\r\n    .catch(error => console.warn(`fetch ${`${DEXTOOLS_API}/${url}`} failed:\\n`, error))\r\n}\r\n\r\nconst searchTokenPair = (address: string, chainId: ChainId): any => {\r\n  if (TOKEN_PAIRS_ADDRESS_MAPPING[address.toLowerCase()]) {\r\n    return new Promise((resolve, reject) => {\r\n      resolve([{ id: { pair: TOKEN_PAIRS_ADDRESS_MAPPING[address.toLowerCase()] } }])\r\n    })\r\n  }\r\n  return fetcherDextools(`shared/search/v2?chains=${DextoolSearchV2ChainId[chainId]}&query=${address}`).then(res =>\r\n    res.results\r\n      .filter((token: any) => token.id.token === address.toLowerCase() && !!token.volume)\r\n      .sort((tokenA: any, tokenB: any) => tokenB.volume - tokenA.volume),\r\n  )\r\n}\r\nconst getHistoryCandleStatus = (pairAddress: string, chainId: ChainId) =>\r\n  fetcherDextools(`${NetworkString[chainId]}/api/Uniswap/1/history-candle-status?pair=${pairAddress}`)\r\n\r\nconst getCandlesApi = (\r\n  chainId: ChainId,\r\n  pairAddress: string,\r\n  apiVersion: string,\r\n  ts: number,\r\n  span = 'month',\r\n  res = '15m',\r\n  sym = 'eth',\r\n) => {\r\n  return fetcherDextools(\r\n    `${\r\n      NetworkString[chainId]\r\n    }/api/Pancakeswap/history/candles?sym=${sym}&span=${span}&pair=${pairAddress}&ts=${ts}&v=${apiVersion}${\r\n      res && '&res=' + res\r\n    }`,\r\n  )\r\n}\r\n\r\nconst isNativeToken = (chainId: ChainId | undefined, currency: Currency | undefined) => {\r\n  if (!currency || !chainId) {\r\n    return false\r\n  }\r\n  return currency.isNative || WETH[chainId].address.toLowerCase() === currency.address.toLowerCase()\r\n}\r\n\r\nconst isUSDToken = (chainId: ChainId | undefined, currency: Currency | undefined) => {\r\n  if (isNativeToken(chainId, currency) || !chainId || currency?.isNative) {\r\n    return false\r\n  }\r\n  const usdTokenAddresses = [\r\n    USDT[chainId].address.toLowerCase(),\r\n    USDC[chainId].address.toLowerCase(),\r\n    DAI[chainId].address.toLowerCase(),\r\n    '0xe9e7cea3dedca5984780bafc599bd69add087d56', //BUSD\r\n    '0xcd7509b76281223f5b7d3ad5d47f8d7aa5c2b9bf', //USDV Velas\r\n    '0xdb28719f7f938507dbfe4f0eae55668903d34a15', //USDT_t BTTC\r\n    '0xe887512ab8bc60bcc9224e1c3b5be68e26048b8b', //USDT_e BTTC\r\n    '0x19860ccb0a68fd4213ab9d8266f7bbf05a8dde98', //BUSD.e\r\n    '0x4fbf0429599460d327bd5f55625e30e4fc066095', //TDS on AVAX\r\n    ...STABLE_COINS_ADDRESS[chainId].map(a => a.toLowerCase()),\r\n  ]\r\n\r\n  if (currency?.address && usdTokenAddresses.includes(currency.address.toLowerCase())) {\r\n    return true\r\n  }\r\n  return false\r\n}\r\n\r\nconst updateLocalstorageCheckedPair = (key: string, res: { ver: number; pairAddress: string }) => {\r\n  const cPstr = localStorage.getItem(LOCALSTORAGE_CHECKED_PAIRS)\r\n  const checkedPairs: { [key: string]: { ver: number; pairAddress: string; time: number } } = cPstr\r\n    ? JSON.parse(cPstr)\r\n    : {}\r\n  checkedPairs[key] = { ...res, time: new Date().getTime() }\r\n  localStorage.setItem(LOCALSTORAGE_CHECKED_PAIRS, JSON.stringify(checkedPairs))\r\n}\r\n\r\nexport const checkPairHasDextoolsData = async (\r\n  currencies: { [field in Field]?: Currency },\r\n  chainId: ChainId,\r\n): Promise<{ ver: number; pairAddress: string }> => {\r\n  const [currencyA, currencyB] = Object.values(currencies)\r\n  const res = { ver: 0, pairAddress: '' }\r\n  if (!currencyA || !currencyB) return Promise.resolve(res)\r\n  if (\r\n    (isNativeToken(chainId, currencyA) && isNativeToken(chainId, currencyB)) ||\r\n    (isUSDToken(chainId, currencyA) && isUSDToken(chainId, currencyB))\r\n  ) {\r\n    return Promise.resolve(res)\r\n  }\r\n  const cPstr = localStorage.getItem(LOCALSTORAGE_CHECKED_PAIRS)\r\n  const checkedPairs: { [key: string]: { ver: number; pairAddress: string; time: number } } = cPstr\r\n    ? JSON.parse(cPstr)\r\n    : {}\r\n  const symbolA = currencyA.isNative ? WETH[chainId].name : currencyA.symbol\r\n  const symbolB = currencyB.isNative ? WETH[chainId].name : currencyB.symbol\r\n  const key: string = [symbolA, symbolB, chainId].sort().join('')\r\n  const checkedPair = checkedPairs[key]\r\n  if (\r\n    checkedPair &&\r\n    checkedPair.ver &&\r\n    checkedPair.pairAddress &&\r\n    checkedPair.time > new Date().getTime() - dayTs // Cache expire after 1 day\r\n  ) {\r\n    return Promise.resolve({ ver: checkedPair.ver, pairAddress: checkedPair.pairAddress })\r\n  }\r\n  /// ETH pair\r\n  if (isNativeToken(chainId, currencyA) || isNativeToken(chainId, currencyB)) {\r\n    const token = (isNativeToken(chainId, currencyA) ? currencyB : currencyA) as Token\r\n    if (token?.address) {\r\n      const searchResults: { id: { pair: string } }[] = await searchTokenPair(token.address, chainId)\r\n      const pairAddress = searchResults[0]?.id?.pair\r\n      if (searchResults && searchResults.length > 0 && pairAddress) {\r\n        const ver = (await getHistoryCandleStatus(pairAddress, chainId)) || 0\r\n\r\n        const ts = Math.floor(new Date().getTime() / monthTs) * monthTs\r\n        const { data } = await getCandlesApi(chainId, pairAddress, ver, ts, 'month')\r\n        if (data?.candles?.length) {\r\n          res.ver = ver\r\n          res.pairAddress = pairAddress\r\n          updateLocalstorageCheckedPair(key, res)\r\n          return Promise.resolve(res)\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    /// USD pair\r\n    if (isUSDToken(chainId, currencyA) || isUSDToken(chainId, currencyB)) {\r\n      const token = (isUSDToken(chainId, currencyA) ? currencyB : currencyA) as Token\r\n      if (token?.address) {\r\n        const searchResults = await searchTokenPair(token.address, chainId)\r\n        const pairAddress = searchResults[0]?.id?.pair\r\n        if (searchResults.length > 0 && pairAddress) {\r\n          const ver = await getHistoryCandleStatus(pairAddress, chainId)\r\n          if (ver) {\r\n            const ts = Math.floor(new Date().getTime() / monthTs) * monthTs\r\n            const { data } = await getCandlesApi(chainId, pairAddress, ver, ts, 'month', '15m', 'usd')\r\n            if (data?.candles?.length) {\r\n              res.ver = ver\r\n              res.pairAddress = pairAddress\r\n              updateLocalstorageCheckedPair(key, res)\r\n              return Promise.resolve(res)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  updateLocalstorageCheckedPair(key, res)\r\n  return Promise.resolve(res)\r\n}\r\n\r\nexport const useDatafeed = (currencies: Array<Currency | undefined>, pairAddress: string, apiVersion: string) => {\r\n  const { chainId } = useActiveWeb3React()\r\n  const isATokenEther = isNativeToken(chainId, currencies[0])\r\n  const isBTokenEther = isNativeToken(chainId, currencies[1])\r\n  const isTokenUSD =\r\n    (isUSDToken(chainId, currencies[0]) && currencies[1]?.isToken) ||\r\n    (isUSDToken(chainId, currencies[1]) && currencies[0]?.isToken)\r\n  const isEtherUSD =\r\n    (isUSDToken(chainId, currencies[0]) && isBTokenEther) || (isUSDToken(chainId, currencies[1]) && isATokenEther)\r\n  const sym = isTokenUSD || isEtherUSD ? 'usd' : 'eth'\r\n  const [data, setData] = useState<Bar[]>([])\r\n  const [oldestTs, setOldestTs] = useState(0)\r\n\r\n  const stateRef = useRef<{ data: Bar[]; oldestTs: number }>({ data, oldestTs })\r\n  const fetchingRef = useRef<boolean>(false)\r\n  const intervalRef = useRef<any>()\r\n\r\n  const isReverse =\r\n    (!isEtherUSD && (isATokenEther || isUSDToken(chainId, currencies[0]))) || (isEtherUSD && isBTokenEther)\r\n\r\n  useEffect(() => {\r\n    stateRef.current = { data, oldestTs }\r\n  }, [data, oldestTs])\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    setData([])\r\n  }, [currencies])\r\n\r\n  const getCandles = useCallback(\r\n    async (ts: number, span = 'month', res = '15m') => {\r\n      const response = await getCandlesApi(chainId, pairAddress, apiVersion, ts, span, res, sym)\r\n      return response?.data\r\n    },\r\n    [chainId, pairAddress, apiVersion, sym],\r\n  )\r\n\r\n  return useMemo(() => {\r\n    return {\r\n      onReady: (callback: any) => {\r\n        setTimeout(() => callback(configurationData))\r\n      },\r\n      resolveSymbol: async (\r\n        symbolName: string,\r\n        onSymbolResolvedCallback: ResolveCallback,\r\n        onResolveErrorCallback: ErrorCallback,\r\n      ) => {\r\n        try {\r\n          const label1 = currencies[0]?.isNative ? WETH[chainId].name : currencies[0]?.symbol\r\n          const label2 = currencies[1]?.isNative ? WETH[chainId].name : currencies[1]?.symbol\r\n\r\n          const label = `${label1}/${label2}`\r\n\r\n          const ts = Math.floor(new Date().getTime() / monthTs) * monthTs\r\n          const { candles } = await getCandles(ts, 'month')\r\n\r\n          const symbolInfo: LibrarySymbolInfo = {\r\n            ticker: label,\r\n            name: label,\r\n            full_name: label,\r\n            listed_exchange: '',\r\n            format: 'price',\r\n            description: label,\r\n            type: 'crypto',\r\n            session: '24x7',\r\n            timezone: Intl.DateTimeFormat().resolvedOptions().timeZone as Timezone,\r\n            exchange: '',\r\n            minmov: 1,\r\n            pricescale:\r\n              candles.length > 0\r\n                ? Math.pow(10, Math.ceil(Math.log10(isReverse ? candles[0].open : 1 / candles[0].open)) + 5)\r\n                : 10000,\r\n            has_intraday: true,\r\n            has_empty_bars: true,\r\n            has_weekly_and_monthly: true,\r\n            has_daily: true,\r\n            supported_resolutions: configurationData.supported_resolutions as ResolutionString[],\r\n            data_status: 'streaming',\r\n          }\r\n          onSymbolResolvedCallback(symbolInfo)\r\n        } catch (error) {\r\n          console.log(error)\r\n        }\r\n      },\r\n      getBars: async (\r\n        symbolInfo: LibrarySymbolInfo,\r\n        resolution: ResolutionString,\r\n        periodParams: PeriodParams,\r\n        onHistoryCallback: HistoryCallback,\r\n        onErrorCallback: ErrorCallback,\r\n      ) => {\r\n        if (fetchingRef.current) return\r\n        try {\r\n          const from = periodParams.from * 1000\r\n          const to = periodParams.to * 1000\r\n          let candlesTemp = stateRef.current.data\r\n          let noData = false\r\n          const minTime = candlesTemp[0]?.time || new Date().getTime()\r\n          if (minTime > from) {\r\n            const lastTimePoint = Math.floor(minTime / monthTs) + (periodParams.firstDataRequest ? 1 : 0)\r\n            const fromTimePoint = Math.floor(from / monthTs)\r\n\r\n            fetchingRef.current = true\r\n            const promisesArray = []\r\n            for (let i = lastTimePoint - 1; i >= fromTimePoint; i--) {\r\n              const ts = i * monthTs\r\n              promisesArray.push(getCandles(ts))\r\n              if (ts < stateRef.current.oldestTs) {\r\n                noData = true\r\n                break\r\n              }\r\n            }\r\n            const datas = await Promise.all(promisesArray)\r\n            setOldestTs(parseFloat(datas[0]?.oldestTs))\r\n            const candles = datas.map(data => {\r\n              return data.candles\r\n            })\r\n            candlesTemp = [...(candles.length ? candles.reduce((p, c) => p.concat(c)) : []), ...candlesTemp].sort(\r\n              (a, b) => a.time - b.time,\r\n            )\r\n            setData(candlesTemp)\r\n\r\n            fetchingRef.current = false\r\n          }\r\n          let formatedCandles = candlesTemp\r\n            .filter((c: Bar) => c.time > from && c.time < to)\r\n            .map((c: Bar, i: number, arr: Bar[]) => {\r\n              if (arr[i + 1] && c.close !== arr[i + 1].open) {\r\n                c.close = arr[i + 1].open\r\n                if (c.close > c.high) {\r\n                  c.high = c.close\r\n                }\r\n                if (c.close < c.low) {\r\n                  c.low = c.close\r\n                }\r\n              }\r\n              if (c.high > 1.1 * Math.max(c.open, c.close)) {\r\n                c.high = Math.max(c.open, c.close)\r\n              }\r\n              if (c.low < Math.min(c.open, c.close) / 1.1) {\r\n                c.low = Math.min(c.open, c.close)\r\n              }\r\n              return c\r\n            })\r\n\r\n          if (isReverse) {\r\n            formatedCandles = formatedCandles.map((c: Bar) => {\r\n              return { ...c, open: 1 / c.open, close: 1 / c.close, high: 1 / c.low, low: 1 / c.high }\r\n            })\r\n          }\r\n          if (resolution === '1D' || resolution === '1W' || resolution === '1M') {\r\n            const dayCandles: { [key: number]: Bar } = {}\r\n            let timeTs = 0\r\n            switch (resolution) {\r\n              case '1D':\r\n                timeTs = dayTs\r\n                break\r\n              case '1W':\r\n                timeTs = weekTs\r\n                break\r\n              case '1M':\r\n                timeTs = monthTs\r\n                break\r\n              default:\r\n                timeTs = dayTs\r\n            }\r\n            formatedCandles.forEach((c: Bar) => {\r\n              const ts = Math.floor(c.time / timeTs)\r\n              if (!dayCandles[ts]) {\r\n                dayCandles[ts] = {\r\n                  ...c,\r\n                  time: ts * timeTs,\r\n                }\r\n              } else {\r\n                dayCandles[ts].volume = (c.volume || 0) + (dayCandles[ts].volume || 0)\r\n                dayCandles[ts].close = c.close\r\n                if (dayCandles[ts].high < c.high) {\r\n                  dayCandles[ts].high = c.high\r\n                }\r\n                if (dayCandles[ts].low > c.low) {\r\n                  dayCandles[ts].low = c.low\r\n                }\r\n              }\r\n            })\r\n            onHistoryCallback(Object.values(dayCandles), { noData: noData })\r\n          } else {\r\n            onHistoryCallback(formatedCandles, { noData: noData })\r\n          }\r\n        } catch (error) {\r\n          console.log('[getBars]: Get error', error)\r\n          onErrorCallback(error as string)\r\n        }\r\n      },\r\n      searchSymbols: () => {\r\n        // TODO(viet-nv): check no empty function rule\r\n      },\r\n      subscribeBars: (\r\n        symbolInfo: LibrarySymbolInfo,\r\n        resolution: ResolutionString,\r\n        onTick: SubscribeBarsCallback,\r\n        listenerGuid: string,\r\n        onResetCacheNeededCallback: () => void,\r\n      ) => {\r\n        if (intervalRef.current) clearInterval(intervalRef.current)\r\n        const getLivePrice = async () => {\r\n          const ts =\r\n            resolution === '1M'\r\n              ? Math.floor(new Date().getTime() / monthTs) * monthTs\r\n              : Math.floor(new Date().getTime() / weekTs) * weekTs\r\n          const data = await getCandles(ts, resolution === '1M' ? 'month' : 'week', '15m')\r\n          if (!data || !data.candles) return\r\n          const { candles } = data\r\n          let lastCandle: any = {}\r\n          let timeTs = 0\r\n\r\n          if (resolution === '1D' || resolution === '1W' || resolution === '1M') {\r\n            switch (resolution) {\r\n              case '1D':\r\n                timeTs = Math.floor(new Date().getTime() / dayTs) * dayTs\r\n                break\r\n              case '1W':\r\n                timeTs = Math.floor(new Date().getTime() / weekTs) * weekTs\r\n                break\r\n              case '1M':\r\n                timeTs = timeTs = Math.floor(new Date().getTime() / monthTs) * monthTs\r\n                break\r\n              default:\r\n                timeTs = Math.floor(new Date().getTime() / dayTs) * dayTs\r\n            }\r\n            const closestTs = candles\r\n              .map((c: any) => c.time)\r\n              .reduce((prev: any, curr: any) => {\r\n                return Math.abs(curr - timeTs) < Math.abs(prev - timeTs) ? curr : prev\r\n              })\r\n            const inRangeCandles = candles.filter((c: any) => c.time >= closestTs)\r\n\r\n            if (inRangeCandles.length > 0) {\r\n              lastCandle.time = timeTs\r\n              lastCandle.open = inRangeCandles[0].open\r\n              lastCandle.close = inRangeCandles[inRangeCandles.length - 1].close\r\n              lastCandle.high = Math.max(...inRangeCandles.map((c: any) => c.high))\r\n              lastCandle.low = Math.min(...inRangeCandles.map((c: any) => c.low))\r\n              lastCandle.volume = inRangeCandles\r\n                .map((c: any) => c.volume)\r\n                .reduce((prev: any, c: any) => {\r\n                  return prev + c\r\n                })\r\n            }\r\n          } else {\r\n            lastCandle = candles[candles.length - 1]\r\n          }\r\n          if (!lastCandle) return\r\n          if (isReverse) {\r\n            lastCandle = {\r\n              ...lastCandle,\r\n              open: 1 / lastCandle.open,\r\n              close: 1 / lastCandle.close,\r\n              high: 1 / lastCandle.low,\r\n              low: 1 / lastCandle.high,\r\n            }\r\n          }\r\n          onTick(lastCandle)\r\n        }\r\n        intervalRef.current = setInterval(getLivePrice, 30000)\r\n        getLivePrice()\r\n      },\r\n      unsubscribeBars: () => {\r\n        // TODO(viet-nv): check no empty function rule\r\n      },\r\n    }\r\n  }, [chainId, getCandles, isReverse, currencies])\r\n}\r\n","import { Currency } from '@kyberswap/ks-sdk-core'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { isMobile } from 'react-device-detect'\r\nimport * as ReactDOMServer from 'react-dom/server'\r\nimport styled from 'styled-components'\r\n\r\nimport { ReactComponent as FullscreenOff } from 'assets/svg/fullscreen_off.svg'\r\nimport { ReactComponent as FullscreenOn } from 'assets/svg/fullscreen_on.svg'\r\nimport AnimatedLoader from 'components/Loader/AnimatedLoader'\r\nimport { Z_INDEXS } from 'constants/styles'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { useUserLocale } from 'state/user/hooks'\r\n\r\nimport { ChartingLibraryWidgetOptions, LanguageCode, ResolutionString, Timezone } from './charting_library'\r\nimport { useDatafeed } from './datafeed'\r\n\r\nconst ProLiveChartWrapper = styled.div<{ fullscreen: boolean }>`\r\n  margin-top: 10px;\r\n  height: ${isMobile ? '100%' : 'calc(100% - 0px)'};\r\n  ${({ theme }) => `border: 1px solid ${theme.background};`}\r\n  overflow: hidden;\r\n  box-shadow: 0px 4px 16px rgb(0 0 0 / 4%);\r\n  border-radius: ${isMobile ? '0' : '10px'};\r\n\r\n  ${({ fullscreen }) =>\r\n    fullscreen &&\r\n    !isMobile &&\r\n    `\r\n    background-color: rgb(0,0,0,0.5);\r\n    position: fixed;\r\n    top: -15px;\r\n    left: 0;\r\n    z-index: ${Z_INDEXS.LIVE_CHART};\r\n    padding-top: 82px;\r\n    height: 100%!important;\r\n    width: 100%!important;\r\n    border-radius: 0;\r\n    margin:0;\r\n  `}\r\n`\r\nconst Loader = styled.div`\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n`\r\n\r\nconst MobileChart = styled.div<{ fullscreen: boolean; $loading: boolean }>`\r\n  height: 100%;\r\n  width: 100%;\r\n  bottom: 0;\r\n\r\n  ${({ theme, fullscreen }) => !fullscreen && `border-bottom: solid 15px ${theme.buttonBlack};`}\r\n  ${({ $loading }) => `display:${$loading ? 'none' : 'block'};`}\r\n`\r\n\r\nconst LOCALSTORAGE_STATE_NAME = 'proChartSavedState'\r\n\r\nfunction openFullscreen(elem: any) {\r\n  if (elem.requestFullscreen) {\r\n    elem.requestFullscreen()\r\n  } else if (elem.webkitRequestFullScreen) {\r\n    /* Old webkit */\r\n    elem.webkitRequestFullScreen()\r\n  } else if (elem.webkitRequestFullscreen) {\r\n    /* New webkit */\r\n    elem.webkitRequestFullscreen()\r\n  } else if (elem.mozRequestFullScreen) {\r\n    elem.mozRequestFullScreen()\r\n  } else if (elem.msRequestFullscreen) {\r\n    /* IE11 */\r\n    elem.msRequestFullscreen()\r\n  }\r\n}\r\n\r\ninterface FullScreenDocument extends Document {\r\n  msExitFullscreen?: () => void\r\n  mozCancelFullScreen?: () => void\r\n  webkitExitFullscreen?: () => void\r\n  webkitCancelFullScreen?: () => void\r\n}\r\n\r\nfunction closeFullscreen() {\r\n  const doc = document as FullScreenDocument\r\n  if (doc.exitFullscreen) {\r\n    doc.exitFullscreen()\r\n  } else if (doc.webkitCancelFullScreen) {\r\n    /* Old webkit */\r\n    doc.webkitCancelFullScreen()\r\n  } else if (doc.webkitExitFullscreen) {\r\n    /* New webkit */\r\n    doc.webkitExitFullscreen()\r\n  } else if (doc.mozCancelFullScreen) {\r\n    doc.mozCancelFullScreen()\r\n  } else if (doc.msExitFullscreen) {\r\n    /* IE11 */\r\n    doc.msExitFullscreen()\r\n  }\r\n}\r\n\r\nfunction ProLiveChart({\r\n  currencies,\r\n  stateProChart,\r\n  className,\r\n  setLoading,\r\n}: {\r\n  currencies: Array<Currency | undefined>\r\n  stateProChart?: any\r\n  className?: string\r\n  setLoading: (loading: boolean) => void\r\n}) {\r\n  const theme = useTheme()\r\n  const userLocale = useUserLocale()\r\n  const { hasProChart, apiVersion, pairAddress, loading } = stateProChart\r\n  const [ref, setRef] = useState<HTMLDivElement | null>(null)\r\n  const [fullscreen, setFullscreen] = useState(false)\r\n\r\n  const datafeed = useDatafeed(currencies, pairAddress, apiVersion)\r\n\r\n  useEffect(() => {\r\n    if (!ref || !hasProChart || !window.TradingView) {\r\n      return\r\n    }\r\n    setLoading(true)\r\n\r\n    const localStorageState = JSON.parse(localStorage.getItem(LOCALSTORAGE_STATE_NAME) || 'null')\r\n    // set auto scale mode to true to fix wrong behavious of right axis price range\r\n    if (localStorageState?.charts[0]?.panes[0]?.rightAxisesState[0]?.state?.m_isAutoScale === false) {\r\n      localStorageState.charts[0].panes[0].rightAxisesState[0].state.m_isAutoScale = true\r\n    }\r\n\r\n    const widgetOptions: ChartingLibraryWidgetOptions = {\r\n      symbol: 'KNC',\r\n      datafeed: datafeed,\r\n      interval: '1H' as ResolutionString,\r\n      container: ref,\r\n      library_path: '/charting_library/',\r\n      locale: (userLocale ? userLocale.slice(0, 2) : 'en') as LanguageCode,\r\n      disabled_features: [\r\n        'header_symbol_search',\r\n        'header_fullscreen_button',\r\n        'header_compare',\r\n        'header_saveload',\r\n        'drawing_templates',\r\n      ],\r\n      enabled_features: [\r\n        'study_templates',\r\n        'create_volume_indicator_by_default',\r\n        'use_localstorage_for_settings',\r\n        'save_chart_properties_to_local_storage',\r\n      ],\r\n      fullscreen: false,\r\n      autosize: true,\r\n      studies_overrides: {},\r\n      theme: theme.darkMode ? 'Dark' : 'Light',\r\n      custom_css_url: '/charting_library/style.css',\r\n      timeframe: '2w',\r\n      time_frames: [\r\n        { text: '6m', resolution: '4H' as ResolutionString, description: '6 Months' },\r\n        { text: '1m', resolution: '1H' as ResolutionString, description: '1 Month' },\r\n        { text: '2w', resolution: '1H' as ResolutionString, description: '2 Weeks' },\r\n        { text: '1w', resolution: '1H' as ResolutionString, description: '1 Week' },\r\n        { text: '1d', resolution: '15' as ResolutionString, description: '1 Day' },\r\n      ],\r\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone as Timezone,\r\n      auto_save_delay: 2,\r\n      saved_data: localStorageState,\r\n    }\r\n    const tvWidget = new window.TradingView.widget(widgetOptions)\r\n\r\n    tvWidget.onChartReady(() => {\r\n      setLoading(false)\r\n      tvWidget.applyOverrides({\r\n        'paneProperties.backgroundType': 'solid',\r\n        'paneProperties.background': theme.darkMode ? theme.buttonBlack : theme.background,\r\n        'mainSeriesProperties.candleStyle.upColor': theme.primary,\r\n        'mainSeriesProperties.candleStyle.borderUpColor': theme.primary,\r\n        'mainSeriesProperties.candleStyle.wickUpColor': theme.primary,\r\n        'mainSeriesProperties.candleStyle.downColor': theme.red,\r\n        'mainSeriesProperties.candleStyle.borderDownColor': theme.red,\r\n        'mainSeriesProperties.candleStyle.wickDownColor': theme.red,\r\n        'mainSeriesProperties.priceAxisProperties.autoScale': true,\r\n        'scalesProperties.textColor': theme.text,\r\n      })\r\n      tvWidget.headerReady().then(() => {\r\n        const fullscreenOn = tvWidget.createButton()\r\n        fullscreenOn.setAttribute('title', 'Fullscreen on')\r\n        fullscreenOn.addEventListener('click', () => {\r\n          setFullscreen(fs => {\r\n            if (isMobile) {\r\n              if (fs) {\r\n                closeFullscreen()\r\n              } else {\r\n                openFullscreen(ref)\r\n              }\r\n            }\r\n            fullscreenOn.innerHTML = ReactDOMServer.renderToStaticMarkup(fs ? <FullscreenOn /> : <FullscreenOff />)\r\n            return !fs\r\n          })\r\n        })\r\n        fullscreenOn.innerHTML = ReactDOMServer.renderToStaticMarkup(<FullscreenOn />)\r\n      })\r\n      tvWidget.subscribe('onAutoSaveNeeded', () => {\r\n        tvWidget.save((object: any) => {\r\n          localStorage.setItem(LOCALSTORAGE_STATE_NAME, JSON.stringify(object))\r\n        })\r\n      })\r\n    })\r\n\r\n    return () => {\r\n      if (tvWidget !== null) {\r\n        tvWidget.remove()\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [theme, userLocale, ref, pairAddress, currencies, hasProChart])\r\n\r\n  return (\r\n    <ProLiveChartWrapper fullscreen={fullscreen} onClick={() => setFullscreen(false)} className={className}>\r\n      {loading && (\r\n        <Loader>\r\n          <AnimatedLoader />\r\n        </Loader>\r\n      )}\r\n\r\n      {isMobile ? (\r\n        <MobileChart\r\n          id=\"mobile25235\"\r\n          ref={newRef => setRef(newRef)}\r\n          onClick={(e: any) => {\r\n            e.stopPropagation()\r\n          }}\r\n          fullscreen={fullscreen}\r\n          $loading={loading}\r\n        />\r\n      ) : (\r\n        <div\r\n          ref={newRef => setRef(newRef)}\r\n          style={{ height: '100%', width: '100%', display: loading ? 'none' : 'block' }}\r\n          onClick={(e: any) => {\r\n            e.stopPropagation()\r\n          }}\r\n        />\r\n      )}\r\n    </ProLiveChartWrapper>\r\n  )\r\n}\r\n\r\nexport default React.memo(ProLiveChart)\r\n","import { useEffect, useRef, useState } from 'react'\r\nimport { animated, useSpring } from 'react-spring'\r\nimport { Flex, Text } from 'rebass'\r\nimport styled from 'styled-components'\r\n\r\nimport useTheme from 'hooks/useTheme'\r\n\r\nfunction formatForDisplay(number = 0) {\r\n  if (number > 1000000) return Math.max(number, 0).toString().split('').reverse()\r\n  else {\r\n    return Math.max(number, 0).toPrecision(6).split('').reverse()\r\n  }\r\n}\r\n\r\nfunction DecimalColumn() {\r\n  return <div>.</div>\r\n}\r\n\r\nconst TicketView = styled.div<{ fontSize: number }>`\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: row-reverse;\r\n  overflow: hidden;\r\n  font-size: ${({ fontSize }) => fontSize}px;\r\n  position: relative;\r\n  color: ${({ theme }) => theme.subText};\r\n  letter-spacing: -1px;\r\n  margin-right: 5px;\r\n`\r\n\r\nconst NumberPlaceHolder = styled.span`\r\n  visibility: hidden;\r\n`\r\n\r\nconst Container = styled.div<{ fontSize: number }>`\r\n  position: relative;\r\n  height: ${({ fontSize }) => fontSize + 4}px;\r\n`\r\n\r\nconst TickerDigit = styled.div`\r\n  height: 10%;\r\n  text-align: center;\r\n`\r\n\r\nconst TickerColumn = styled(animated.div)`\r\n  position: absolute;\r\n  height: 1000%;\r\n  bottom: 0;\r\n  transition: all 0.6s cubic-bezier(0.4, -0.1, 0.6, 1) 1;\r\n`\r\n\r\nfunction NumberColumn({ digit, fontSize }: { digit: number; fontSize: number }) {\r\n  const [position, setPosition] = useState(0)\r\n  const columnContainer = useRef<HTMLDivElement>()\r\n\r\n  const setColumnToNumber = (number: number) => {\r\n    if (columnContainer.current) {\r\n      setPosition(columnContainer.current?.clientHeight * number ?? 0)\r\n    }\r\n  }\r\n\r\n  useEffect(() => setColumnToNumber(digit), [digit])\r\n\r\n  const styles = useSpring({\r\n    to: { transform: `translateY(${position}px)` },\r\n  })\r\n\r\n  return (\r\n    <Container ref={columnContainer as any} fontSize={fontSize}>\r\n      <TickerColumn style={styles}>\r\n        {[9, 8, 7, 6, 5, 4, 3, 2, 1, 0].map(num => (\r\n          <TickerDigit key={num}>{num}</TickerDigit>\r\n        ))}\r\n      </TickerColumn>\r\n      <NumberPlaceHolder>0</NumberPlaceHolder>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default function AnimatingNumber({\r\n  value,\r\n  symbol,\r\n  fontSize,\r\n}: {\r\n  value: number\r\n  symbol: string | undefined\r\n  fontSize: number\r\n}) {\r\n  const values = value.toString().split('e')\r\n  const baseValue = parseFloat(values[0])\r\n  const eValue = values[1]\r\n  const numArray = formatForDisplay(baseValue)\r\n  const theme = useTheme()\r\n\r\n  if (baseValue === Infinity) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <Flex style={{ fontWeight: 500 }}>\r\n      <TicketView fontSize={fontSize}>\r\n        {numArray.map((number, index) =>\r\n          number === '.' ? (\r\n            <DecimalColumn key={index} />\r\n          ) : (\r\n            <NumberColumn key={index} digit={parseInt(number)} fontSize={fontSize} />\r\n          ),\r\n        )}\r\n      </TicketView>\r\n      {eValue && (\r\n        <Flex fontSize=\"16px\" alignItems={'flex-end'} color={theme.subText} paddingBottom=\"3px\" paddingTop=\"5px\">\r\n          10<sup style={{ fontSize: '10px', alignSelf: 'flex-start' }}>{eValue}</sup>\r\n        </Flex>\r\n      )}\r\n      {symbol && (\r\n        <Text fontSize={fontSize} color={theme.subText}>\r\n          {symbol}\r\n        </Text>\r\n      )}\r\n    </Flex>\r\n  )\r\n}\r\n","export default function CircleInfoIcon() {\r\n  return (\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"52\" height=\"52\" viewBox=\"0 0 52 52\" fill=\"none\">\r\n      <path\r\n        fillRule=\"evenodd\"\r\n        clipRule=\"evenodd\"\r\n        d=\"M26 2V2C39.256 2 50 12.744 50 26V26C50 39.256 39.256 50 26 50V50C12.744 50 2 39.256 2 26V26C2 12.744 12.744 2 26 2Z\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"4\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n      <path\r\n        d=\"M25.998 15.5C25.722 15.5 25.498 15.724 25.5 16C25.5 16.276 25.724 16.5 26 16.5C26.276 16.5 26.5 16.276 26.5 16C26.5 15.724 26.276 15.5 25.998 15.5\"\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"4\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n      <path d=\"M27 37V24H24\" stroke=\"currentColor\" strokeWidth=\"4\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\r\n    </svg>\r\n  )\r\n}\r\n","import { Currency } from '@kyberswap/ks-sdk-core'\r\nimport { Trans } from '@lingui/macro'\r\nimport React, { useCallback, useEffect, useMemo, useState } from 'react'\r\nimport { isMobile } from 'react-device-detect'\r\nimport { Repeat } from 'react-feather'\r\nimport { Flex, Text } from 'rebass'\r\nimport styled from 'styled-components'\r\n\r\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\r\nimport ProChartToggle from 'components/LiveChart/ProChartToggle'\r\nimport Loader from 'components/LocalLoader'\r\nimport ProLiveChart from 'components/TradingViewChart'\r\nimport { checkPairHasDextoolsData } from 'components/TradingViewChart/datafeed'\r\nimport { useActiveWeb3React } from 'hooks'\r\nimport useBasicChartData, { LiveDataTimeframeEnum } from 'hooks/useBasicChartData'\r\nimport useMixpanel, { MIXPANEL_TYPE } from 'hooks/useMixpanel'\r\nimport usePrevious from 'hooks/usePrevious'\r\nimport useTheme from 'hooks/useTheme'\r\nimport { Field } from 'state/swap/actions'\r\nimport { useShowProLiveChart, useToggleProLiveChart } from 'state/user/hooks'\r\nimport { useCurrencyConvertedToNative } from 'utils/dmm'\r\n\r\nimport AnimatingNumber from './AnimatingNumber'\r\nimport CircleInfoIcon from './CircleInfoIcon'\r\nimport LineChart from './LineChart'\r\nimport WarningIcon from './WarningIcon'\r\n\r\nconst LiveChartWrapper = styled.div`\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n`\r\nconst TimeFrameButton = styled.div<{ active?: boolean }>`\r\n  cursor: pointer;\r\n  width: 26px;\r\n  height: 24px;\r\n  border-radius: 4px;\r\n  line-height: 24px;\r\n  margin-right: 5px;\r\n  text-align: center;\r\n  color: ${({ theme }) => theme.subText};\r\n  font-size: 12px;\r\n  font-weight: 500;\r\n  background-color: ${({ theme }) => theme.buttonBlack};\r\n  transition: all 0.2s ease;\r\n  ${({ theme, active }) =>\r\n    active\r\n      ? `background-color: ${theme.primary}; color: ${theme.textReverse};`\r\n      : `\r\n    &:hover {\r\n      background-color: ${theme.buttonGray};\r\n    }\r\n  `}\r\n`\r\n\r\nconst SwitchButtonWrapper = styled.div`\r\n  display: flex;\r\n  width: 24px;\r\n  height: 24px;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  align-items: center;\r\n  justify-content: center;\r\n  &:hover {\r\n    background-color: ${({ theme }) => theme.buttonGray};\r\n  }\r\n`\r\n\r\nconst ProLiveChartCustom = styled(ProLiveChart)<{ $isShowProChart: boolean }>`\r\n  margin: ${() => (isMobile ? '0' : '16px 0 0 0 !important')};\r\n  display: ${({ $isShowProChart }) => ($isShowProChart ? 'block' : 'none')};\r\n  background: ${({ theme }) => (theme.darkMode ? theme.buttonBlack : theme.background)};\r\n`\r\n\r\nconst getDifferentValues = (chartData: any, hoverValue: number | null) => {\r\n  if (chartData && chartData.length > 0) {\r\n    const firstValue = chartData[0].value\r\n    const lastValue = chartData[chartData.length - 1].value\r\n    const differentValue = hoverValue !== null ? hoverValue - lastValue : lastValue - firstValue\r\n    const compareValue = hoverValue !== null ? lastValue : firstValue\r\n    return {\r\n      chartColor: lastValue - firstValue >= 0 ? '#31CB9E' : '#FF537B',\r\n      different: differentValue.toPrecision(6),\r\n      differentPercent: compareValue === 0 ? 100 : ((differentValue / compareValue) * 100).toFixed(2),\r\n    }\r\n  }\r\n  return {\r\n    chartColor: '#31CB9E',\r\n    different: 0,\r\n    differentPercent: 0,\r\n  }\r\n}\r\n\r\nconst getTimeFrameText = (timeFrame: LiveDataTimeframeEnum) => {\r\n  switch (timeFrame) {\r\n    case LiveDataTimeframeEnum.HOUR:\r\n      return 'Past hour'\r\n    case LiveDataTimeframeEnum.FOUR_HOURS:\r\n      return 'Past 4 hours'\r\n    case LiveDataTimeframeEnum.DAY:\r\n      return 'Past 24 hours'\r\n    case LiveDataTimeframeEnum.WEEK:\r\n      return 'Past Week'\r\n    case LiveDataTimeframeEnum.MONTH:\r\n      return 'Past Month'\r\n    case LiveDataTimeframeEnum.SIX_MONTHS:\r\n      return 'Past 6 Months'\r\n  }\r\n}\r\n\r\nfunction LiveChart({\r\n  currencies,\r\n  onRotateClick,\r\n}: {\r\n  currencies: { [field in Field]?: Currency }\r\n  onRotateClick?: () => void\r\n}) {\r\n  const { chainId, isSolana } = useActiveWeb3React()\r\n  const theme = useTheme()\r\n  const prevCurrencies = usePrevious(currencies)\r\n  const [currenciesState, setCurrenciesState] = useState(currencies)\r\n\r\n  const nativeInputCurrency = useCurrencyConvertedToNative(currenciesState[Field.INPUT] || undefined)\r\n  const nativeOutputCurrency = useCurrencyConvertedToNative(currenciesState[Field.OUTPUT] || undefined)\r\n\r\n  const tokens = useMemo(() => {\r\n    return [nativeInputCurrency, nativeOutputCurrency].map(currency => currency?.wrapped)\r\n  }, [nativeInputCurrency, nativeOutputCurrency])\r\n\r\n  const isWrappedToken = !!tokens[0]?.address && tokens[0]?.address === tokens[1]?.address\r\n  const isUnwrapingWSOL = isSolana && isWrappedToken && currencies[Field.INPUT]?.isToken\r\n  const [hoverValue, setHoverValue] = useState<number | null>(null)\r\n  const [timeFrame, setTimeFrame] = useState<LiveDataTimeframeEnum>(LiveDataTimeframeEnum.DAY)\r\n  const [stateProChart, setStateProChart] = useState({\r\n    hasProChart: false,\r\n    pairAddress: '',\r\n    apiVersion: '',\r\n    loading: true,\r\n  })\r\n  const { data: chartData, error: basicChartError, loading: basicChartLoading } = useBasicChartData(tokens, timeFrame)\r\n  const isProchartError = !stateProChart.hasProChart && !stateProChart.loading\r\n  const isBasicchartError = basicChartError && !basicChartLoading\r\n  const bothChartError = isProchartError && isBasicchartError\r\n  const showProChartStore = useShowProLiveChart()\r\n  const toggleProLiveChart = useToggleProLiveChart()\r\n  const { mixpanelHandler } = useMixpanel()\r\n\r\n  const handleSetLoading = useCallback(\r\n    (loading: boolean) =>\r\n      setStateProChart(prev => {\r\n        return { ...prev, loading: loading }\r\n      }),\r\n    [],\r\n  )\r\n  useEffect(() => {\r\n    if (hoverValue !== null) {\r\n      setHoverValue(null)\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [chartData])\r\n\r\n  useEffect(() => {\r\n    let currenciesChanged = false\r\n    if (!currencies.INPUT || !currencies.OUTPUT) return\r\n\r\n    setCurrenciesState(prev => {\r\n      // Check if switched currencies (INPUT become OUTPUT and OUTPUT become INPUT)\r\n      if (\r\n        prevCurrencies &&\r\n        currencies &&\r\n        prevCurrencies?.INPUT?.symbol === currencies?.OUTPUT?.symbol &&\r\n        prevCurrencies?.OUTPUT?.symbol === currencies?.INPUT?.symbol\r\n      ) {\r\n        // then keep current local currencies order\r\n        return prev\r\n      }\r\n      // If currencies changed with new currencies pair => update new currencies\r\n      return currencies\r\n    })\r\n\r\n    setStateProChart({ hasProChart: false, pairAddress: '', apiVersion: '', loading: true })\r\n    checkPairHasDextoolsData(currencies, chainId)\r\n      .then((res: any) => {\r\n        if (currenciesChanged) return\r\n        if ((res.ver || res.ver === 0) && res.pairAddress) {\r\n          setStateProChart({ hasProChart: true, pairAddress: res.pairAddress, apiVersion: res.ver, loading: true })\r\n        } else {\r\n          setStateProChart({ hasProChart: false, pairAddress: '', apiVersion: '', loading: false })\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.log(error)\r\n        setStateProChart({ hasProChart: false, pairAddress: '', apiVersion: '', loading: false })\r\n      })\r\n    return () => {\r\n      currenciesChanged = true\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [JSON.stringify(currencies)])\r\n\r\n  const showingValue = hoverValue ?? (chartData[chartData.length - 1]?.value || 0)\r\n\r\n  const { chartColor, different, differentPercent } = getDifferentValues(chartData, hoverValue)\r\n\r\n  const [isShowProChart, setIsShowProChart] = useState(showProChartStore && !isProchartError)\r\n\r\n  useEffect(() => {\r\n    setIsShowProChart(showProChartStore && !isProchartError)\r\n    let timeout: NodeJS.Timeout\r\n    if (showProChartStore && stateProChart.loading) {\r\n      timeout = setTimeout(() => {\r\n        // Switch to Basic chart after loading over 5 seconds\r\n        toggleProLiveChart()\r\n      }, 5000)\r\n    }\r\n    return () => {\r\n      if (timeout) {\r\n        clearTimeout(timeout)\r\n      }\r\n    }\r\n  }, [showProChartStore, isProchartError, stateProChart.loading, toggleProLiveChart])\r\n\r\n  const renderTimeframes = () => {\r\n    return (\r\n      <Flex marginTop={'5px'}>\r\n        {[...Object.values(LiveDataTimeframeEnum)].map(item => {\r\n          return (\r\n            <TimeFrameButton key={item} onClick={() => setTimeFrame(item)} active={timeFrame === item}>\r\n              {item}\r\n            </TimeFrameButton>\r\n          )\r\n        })}\r\n      </Flex>\r\n    )\r\n  }\r\n\r\n  const toggle = useMemo(() => {\r\n    return (\r\n      <ProChartToggle\r\n        activeName={isShowProChart ? 'pro' : 'basic'}\r\n        toggle={(name: string) => {\r\n          if (!bothChartError) {\r\n            if (name !== (isShowProChart ? 'pro' : 'basic')) {\r\n              if (name === 'pro') {\r\n                mixpanelHandler(MIXPANEL_TYPE.PRO_CHART_CLICKED)\r\n              } else {\r\n                mixpanelHandler(MIXPANEL_TYPE.BASIC_CHART_CLICKED)\r\n              }\r\n              toggleProLiveChart()\r\n            }\r\n          }\r\n        }}\r\n        buttons={[\r\n          { name: 'basic', title: 'Basic', disabled: isBasicchartError },\r\n          { name: 'pro', title: 'Pro', disabled: isProchartError },\r\n        ]}\r\n      />\r\n    )\r\n  }, [isBasicchartError, isProchartError, isShowProChart, bothChartError, toggleProLiveChart, mixpanelHandler])\r\n\r\n  const currenciesList = useMemo(\r\n    () => [currenciesState.INPUT, currenciesState.OUTPUT],\r\n    [currenciesState.INPUT, currenciesState.OUTPUT],\r\n  )\r\n\r\n  return (\r\n    <LiveChartWrapper>\r\n      {isWrappedToken ? (\r\n        <Flex\r\n          minHeight={isMobile ? '380px' : '440px'}\r\n          flexDirection={'column'}\r\n          alignItems={'center'}\r\n          justifyContent={'center'}\r\n          color={theme.border}\r\n          style={{ gap: '16px' }}\r\n        >\r\n          <CircleInfoIcon />\r\n          <Text fontSize={16} textAlign={'center'}>\r\n            {isUnwrapingWSOL ? (\r\n              <Trans>You can only swap all WSOL to SOL</Trans>\r\n            ) : (\r\n              <Trans>\r\n                You can swap {nativeInputCurrency?.symbol} for {nativeOutputCurrency?.symbol} (and vice versa)\r\n              </Trans>\r\n            )}\r\n            <br />\r\n            <Trans>Exchange rate is always 1 to 1.</Trans>\r\n          </Text>\r\n        </Flex>\r\n      ) : (\r\n        <>\r\n          <Flex justifyContent=\"space-between\" alignItems=\"center\" paddingY=\"4px\">\r\n            <Flex flex={isMobile ? 2 : 1}>\r\n              <DoubleCurrencyLogo\r\n                currency0={nativeInputCurrency}\r\n                currency1={nativeOutputCurrency}\r\n                size={24}\r\n                margin={true}\r\n              />\r\n              <Flex alignItems=\"center\" fontSize={isMobile ? 14 : 18} color={theme.subText}>\r\n                <Flex alignItems=\"center\">\r\n                  <Text fontSize={isMobile ? 18 : 24} fontWeight={500} color={theme.text}>\r\n                    {nativeInputCurrency?.symbol}\r\n                  </Text>\r\n                  <Text marginLeft=\"4px\" style={{ whiteSpace: 'nowrap' }}>\r\n                    {' / '}\r\n                    {nativeOutputCurrency?.symbol}\r\n                  </Text>\r\n                </Flex>\r\n                <SwitchButtonWrapper\r\n                  onClick={() =>\r\n                    setCurrenciesState(prev => {\r\n                      return { INPUT: prev[Field.OUTPUT], OUTPUT: prev[Field.INPUT] }\r\n                    })\r\n                  }\r\n                >\r\n                  <Repeat size={14} />\r\n                </SwitchButtonWrapper>\r\n              </Flex>\r\n            </Flex>\r\n            <Flex flex={1} justifyContent=\"flex-end\">\r\n              {toggle}\r\n            </Flex>\r\n          </Flex>\r\n\r\n          <ProLiveChartCustom\r\n            currencies={currenciesList}\r\n            stateProChart={stateProChart}\r\n            $isShowProChart={isShowProChart}\r\n            setLoading={handleSetLoading}\r\n          />\r\n          {!isShowProChart && (\r\n            <>\r\n              <Flex justifyContent=\"space-between\" alignItems=\"flex-start\" marginTop=\"12px\">\r\n                <Flex flexDirection=\"column\" alignItems=\"flex-start\">\r\n                  {showingValue === 0 || basicChartError ? (\r\n                    <Text fontSize={28} color={theme.subText}>\r\n                      --\r\n                    </Text>\r\n                  ) : (\r\n                    <AnimatingNumber\r\n                      value={showingValue}\r\n                      symbol={nativeOutputCurrency?.symbol}\r\n                      fontSize={isMobile ? 24 : 28}\r\n                    />\r\n                  )}\r\n                  <Flex marginTop=\"2px\">\r\n                    {showingValue === 0 || basicChartError ? (\r\n                      <Text fontSize={12} color={theme.disableText}>\r\n                        --\r\n                      </Text>\r\n                    ) : (\r\n                      <>\r\n                        <Text fontSize={12} color={different >= 0 ? '#31CB9E' : '#FF537B'} marginRight=\"5px\">\r\n                          {different} ({differentPercent}%)\r\n                        </Text>\r\n                        {!hoverValue && (\r\n                          <Text fontSize={12} color={theme.disableText}>\r\n                            {getTimeFrameText(timeFrame)}\r\n                          </Text>\r\n                        )}\r\n                      </>\r\n                    )}\r\n                  </Flex>\r\n                </Flex>\r\n                {!isMobile && renderTimeframes()}\r\n              </Flex>\r\n              {isMobile && !showProChartStore && renderTimeframes()}\r\n              <div style={{ flex: 1, marginTop: '12px' }}>\r\n                {basicChartLoading || isBasicchartError ? (\r\n                  <Flex\r\n                    minHeight={isMobile ? '300px' : '370px'}\r\n                    flexDirection={'column'}\r\n                    alignItems={'center'}\r\n                    justifyContent={'center'}\r\n                    color={theme.disableText}\r\n                    style={{ gap: '16px' }}\r\n                  >\r\n                    {basicChartLoading ? (\r\n                      <Loader />\r\n                    ) : (\r\n                      isBasicchartError && (\r\n                        <>\r\n                          <WarningIcon />\r\n                          <Text fontSize={16}>\r\n                            <Trans>Chart is unavailable right now</Trans>\r\n                          </Text>\r\n                        </>\r\n                      )\r\n                    )}\r\n                  </Flex>\r\n                ) : (\r\n                  <LineChart\r\n                    data={chartData}\r\n                    setHoverValue={setHoverValue}\r\n                    color={chartColor}\r\n                    timeFrame={timeFrame}\r\n                    minHeight={370}\r\n                  />\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n        </>\r\n      )}\r\n    </LiveChartWrapper>\r\n  )\r\n}\r\n\r\nexport default React.memo(LiveChart)\r\n"],"sourceRoot":""}